<!DOCTYPE index.html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>1분 클릭 챌린지</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Nanum+Gothic:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Montserrat', 'Nanum Gothic', Arial, sans-serif;
      background: linear-gradient(135deg, #f9d1d1 0%, #f9e0d1 40%, #d1e9f9 100%);
      margin: 0; padding: 0;
      min-height: 100vh;
      display: flex; flex-direction: column; align-items: center;
    }
    .container {
      margin-top: 48px;
      background: rgba(255,255,255,0.95);
      border-radius: 32px;
      box-shadow: 0 8px 32px #0002, 0 1.5px 0 #fff8 inset;
      padding: 40px 28px 32px 28px;
      width: 100%; max-width: 370px;
      display: flex; flex-direction: column; align-items: center;
      transition: box-shadow 0.2s;
    }
    h1 {
      font-family: 'Montserrat', 'Nanum Gothic', Arial, sans-serif;
      font-size: 2em;
      margin-bottom: 18px;
      background: linear-gradient(90deg, #ff7eb3 0%, #ff758c 100%);
      color: transparent;
      -webkit-background-clip: text;
      background-clip: text;
      font-weight: 700;
      letter-spacing: -1px;
    }
    .hidden { display: none; }
    input[type="text"] {
      width: 100%; padding: 13px; font-size: 1.1em;
      border: none; border-radius: 16px;
      background: #f3f3f3;
      box-shadow: 0 2px 8px #0001 inset;
      margin-bottom: 18px;
      outline: none;
      transition: box-shadow 0.2s;
    }
    input[type="text"]:focus {
      box-shadow: 0 0 0 2px #ffb3c6;
    }
    button {
      width: 100%; padding: 15px; font-size: 1.15em;
      background: linear-gradient(90deg, #ffb3c6 0%, #b5ead7 100%);
      color: #333; border: none; border-radius: 18px;
      font-weight: 700;
      box-shadow: 0 2px 8px #0001;
      cursor: pointer; margin-bottom: 10px;
      transition: background 0.2s, box-shadow 0.2s, color 0.2s;
      letter-spacing: 0.5px;
    }
    button:active {
      background: linear-gradient(90deg, #b5ead7 0%, #ffb3c6 100%);
      color: #222;
      box-shadow: 0 1px 2px #0002;
    }
    .big-btn {
      width: 100%; height: 90px; font-size: 2.1em;
      background: linear-gradient(90deg, #f9d1d1 0%, #f9e0d1 100%);
      color: #ff758c;
      border-radius: 24px;
      margin: 22px 0 12px 0; border: none;
      font-family: 'Montserrat', 'Nanum Gothic', Arial, sans-serif;
      font-weight: 700;
      box-shadow: 0 4px 16px #ffb3c655, 0 1.5px 0 #fff8 inset;
      transition: background 0.15s, color 0.15s;
    }
    .big-btn:active {
      background: linear-gradient(90deg, #ffb3c6 0%, #b5ead7 100%);
      color: #ff7eb3;
    }
    .info {
      font-size: 1.15em; margin: 10px 0; color: #555;
      font-family: 'Nanum Gothic', Arial, sans-serif;
    }
    .result {
      font-size: 1.4em; margin: 20px 0; color: #ff758c;
      font-family: 'Montserrat', 'Nanum Gothic', Arial, sans-serif;
      font-weight: 700;
    }
    .ranking {
      margin-top: 28px;
      width: 100%;
      background: #f9e0d1cc;
      border-radius: 18px;
      box-shadow: 0 2px 8px #ffb3c622;
      padding: 18px 10px 10px 10px;
    }
    .ranking-title {
      font-weight: bold; margin-bottom: 10px; color: #ff7eb3;
      font-family: 'Montserrat', 'Nanum Gothic', Arial, sans-serif;
      font-size: 1.1em;
    }
    ol {
      padding-left: 20px; margin: 0 0 8px 0;
    }
    ol li {
      font-size: 1.08em; margin-bottom: 3px; color: #333;
      font-family: 'Nanum Gothic', Arial, sans-serif;
      padding: 2px 0;
    }
    #showAllBtn {
      background: linear-gradient(90deg, #b5ead7 0%, #ffb3c6 100%);
      color: #555;
      font-size: 1em;
      margin-top: 8px;
      border-radius: 12px;
      box-shadow: none;
      padding: 10px;
    }
    #showAllBtn:active {
      background: linear-gradient(90deg, #ffb3c6 0%, #b5ead7 100%);
      color: #222;
    }
    @media (max-width: 500px) {
      .container { padding: 16px 2vw; }
      .big-btn { height: 60px; font-size: 1.2em; }
      h1 { font-size: 1.3em; }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- 이름 입력 화면 -->
    <div id="nameScreen">
      <h1>이름을 입력하세요</h1>
      <input type="text" id="userName" maxlength="10" placeholder="이름 (필수)" autocomplete="off" />
      <button id="nextBtn">다음</button>
    </div>
    <!-- 준비 화면 -->
    <div id="readyScreen" class="hidden">
      <h1>준비 되셨나요?</h1>
      <button id="startBtn">시작</button>
    </div>
    <!-- 게임 화면 -->
    <div id="gameScreen" class="hidden">
      <h1>1분 클릭 챌린지</h1>
      <div class="info"><span id="timer">60</span>초 남음</div>
      <div class="info">클릭 수: <span id="clickCount">0</span></div>
      <button id="clickBtn" class="big-btn">클릭!</button>
    </div>
    <!-- 결과/랭킹 화면 -->
    <div id="resultScreen" class="hidden">
      <h1>결과</h1>
      <div class="result" id="resultMsg"></div>
      <button id="retryBtn">다시하기</button>
      <div class="ranking">
        <div class="ranking-title">내 브라우저 랭킹 TOP 3</div>
        <ol id="rankingList"></ol>
        <button id="showAllBtn" style="margin-top:8px; font-size:0.98em;">모든 랭킹 보기</button>
      </div>
      <div style="margin-top:12px; font-size:0.95em; color:#888; text-align:center;">결과 화면을 캡처해서 인스타에 공유해보세요!</div>
    </div>
  </div>
  <script>
    // 상태 변수
    let userName = '';
    let clickCount = 0;
    let timer = 60;
    let timerId = null;
    let gameActive = false;
    let showAll = false;

    // DOM 요소
    const nameScreen = document.getElementById('nameScreen');
    const readyScreen = document.getElementById('readyScreen');
    const gameScreen = document.getElementById('gameScreen');
    const resultScreen = document.getElementById('resultScreen');
    const userNameInput = document.getElementById('userName');
    const nextBtn = document.getElementById('nextBtn');
    const startBtn = document.getElementById('startBtn');
    const clickBtn = document.getElementById('clickBtn');
    const timerSpan = document.getElementById('timer');
    const clickCountSpan = document.getElementById('clickCount');
    const resultMsg = document.getElementById('resultMsg');
    const retryBtn = document.getElementById('retryBtn');
    const rankingList = document.getElementById('rankingList');
    const showAllBtn = document.getElementById('showAllBtn');

    // 이름 입력 → 준비
    nextBtn.onclick = () => {
      const name = userNameInput.value.trim();
      if (!name) {
        alert('이름을 입력해주세요!');
        userNameInput.focus();
        return;
      }
      userName = name;
      nameScreen.classList.add('hidden');
      readyScreen.classList.remove('hidden');
      startBtn.focus();
    };
    // 준비 → 게임 시작
    startBtn.onclick = () => {
      readyScreen.classList.add('hidden');
      gameScreen.classList.remove('hidden');
      startGame();
    };
    // 게임 시작
    function startGame() {
      clickCount = 0;
      timer = 60;
      gameActive = true;
      clickCountSpan.textContent = clickCount;
      timerSpan.textContent = timer;
      clickBtn.disabled = false;
      clickBtn.focus();
      timerId = setInterval(() => {
        timer--;
        timerSpan.textContent = timer;
        if (timer <= 0) {
          endGame();
        }
      }, 1000);
    }
    // 클릭 버튼
    clickBtn.onclick = () => {
      if (!gameActive) return;
      clickCount++;
      clickCountSpan.textContent = clickCount;
      // 매 클릭마다 새로운 오디오 객체로 사운드 재생
      try {
        const coinSound = new Audio('coin.mp3');
        coinSound.volume = 0.7;
        coinSound.play();
      } catch(e) {}
    };
    // 게임 종료
    function endGame() {
      clearInterval(timerId);
      gameActive = false;
      clickBtn.disabled = true;
      gameScreen.classList.add('hidden');
      resultScreen.classList.remove('hidden');
      resultMsg.textContent = `${userName}님의 1분 클릭 수: ${clickCount}회`;
      saveRanking(userName, clickCount);
      renderRanking(false);
    }
    // 랭킹 저장/불러오기 (로컬)
    function saveRanking(name, score) {
      let ranking = JSON.parse(localStorage.getItem('clickRanking') || '[]');
      ranking.push({ name, score });
      ranking.sort((a, b) => b.score - a.score);
      localStorage.setItem('clickRanking', JSON.stringify(ranking));
    }
    function renderRanking(forceAll) {
      let ranking = JSON.parse(localStorage.getItem('clickRanking') || '[]');
      rankingList.innerHTML = '';
      let displayCount = (showAll || forceAll) ? ranking.length : Math.min(3, ranking.length);
      ranking.slice(0, displayCount).forEach((item, idx) => {
        const li = document.createElement('li');
        li.textContent = `${idx + 1}등 ${item.name} - ${item.score}회`;
        rankingList.appendChild(li);
      });
      if (ranking.length > 3) {
        showAllBtn.style.display = '';
        showAllBtn.textContent = showAll ? '간단히 보기' : '모든 랭킹 보기';
      } else {
        showAllBtn.style.display = 'none';
      }
    }
    showAllBtn.onclick = () => {
      showAll = !showAll;
      renderRanking();
    };
    // 다시하기
    retryBtn.onclick = () => {
      resultScreen.classList.add('hidden');
      readyScreen.classList.remove('hidden');
      showAll = false;
    };
    // 엔터로 이름 입력 시 다음
    userNameInput.addEventListener('keydown', e => {
      if (e.key === 'Enter') nextBtn.click();
    });
  </script>
</body>
</html> 
